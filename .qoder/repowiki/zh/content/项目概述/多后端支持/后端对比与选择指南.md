# åç«¯å¯¹æ¯”ä¸é€‰æ‹©æŒ‡å—

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [components/src/dynamo/sglang/main.py](file://components/src/dynamo/sglang/main.py)
- [components/src/dynamo/trtllm/main.py](file://components/src/dynamo/trtllm/main.py)
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py)
- [docs/pages/reference/feature-matrix.md](file://docs/pages/reference/feature-matrix.md)
- [docs/pages/reference/support-matrix.md](file://docs/pages/reference/support-matrix.md)
- [docs/pages/backends/sglang/README.md](file://docs/pages/backends/sglang/README.md)
- [docs/pages/backends/trtllm/README.md](file://docs/pages/backends/trtllm/README.md)
- [docs/pages/backends/vllm/README.md](file://docs/pages/backends/vllm/README.md)
- [docs/pages/design-docs/disagg-serving.md](file://docs/pages/design-docs/disagg-serving.md)
- [docs/pages/fault-tolerance/request-migration.md](file://docs/pages/fault-tolerance/request-migration.md)
- [docs/pages/fault-tolerance/request-cancellation.md](file://docs/pages/fault-tolerance/request-cancellation.md)
- [deploy/operator/internal/dynamo/graph.go](file://deploy/operator/internal/dynamo/graph.go)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ€»è§ˆ](#æ¶æ„æ€»è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒé‡](#æ€§èƒ½è€ƒé‡)
8. [æ•…éšœå¤„ç†ä¸è¿ç§»](#æ•…éšœå¤„ç†ä¸è¿ç§»)
9. [è¿ç§»æŒ‡å—ä¸æœ€ä½³å®è·µ](#è¿ç§»æŒ‡å—ä¸æœ€ä½³å®è·µ)
10. [ç»“è®º](#ç»“è®º)
11. [é™„å½•ï¼šåŠŸèƒ½çŸ©é˜µä¸å†³ç­–æ ‘](#é™„å½•åŠŸèƒ½çŸ©é˜µä¸å†³ç­–æ ‘)

## ç®€ä»‹
æœ¬æŒ‡å—å›´ç»• Dynamo å¹³å°çš„ä¸‰å¤§åç«¯å¼•æ“ï¼ˆSGLangã€TensorRT-LLMã€vLLMï¼‰è¿›è¡Œç³»ç»Ÿæ€§å¯¹æ¯”ï¼Œè¦†ç›–æ€§èƒ½ç‰¹å¾ã€åŠŸèƒ½æ”¯æŒã€éƒ¨ç½²å¤æ‚åº¦ä¸é€‚ç”¨åœºæ™¯ï¼Œå¹¶æä¾›åŸºäºåŠŸèƒ½çŸ©é˜µçš„å¯¹æ¯”è¡¨ã€åç«¯é€‰æ‹©å†³ç­–æ ‘ä¸è¿ç§»æŒ‡å—ï¼Œå¸®åŠ©ä¸åŒæŠ€æœ¯èƒŒæ™¯çš„è¯»è€…å¿«é€Ÿåšå‡ºé€‚åˆè‡ªèº«éœ€æ±‚çš„é€‰å‹ä¸å®æ–½å†³ç­–ã€‚

## é¡¹ç›®ç»“æ„
æœ¬ä»“åº“é‡‡ç”¨æ¨¡å—åŒ–åˆ†å±‚ç»„ç»‡ï¼Œåç«¯å¼•æ“ä»¥ç‹¬ç«‹å­æ¨¡å—å½¢å¼é›†æˆåˆ°ç»Ÿä¸€çš„åˆ†å¸ƒå¼è¿è¡Œæ—¶ä¸­ï¼š
- å‰ç«¯ä¸è·¯ç”±ï¼šè´Ÿè´£è¯·æ±‚æ¥å…¥ã€é¢„å¤„ç†ä¸è·¯ç”±åè°ƒ
- åç«¯å¼•æ“ï¼šåˆ†åˆ«åœ¨ components/src/dynamo/{sglang,trtllm,vllm}/ ä¸‹å®ç°
- è¿è¡Œæ—¶ä¸å‘ç°ï¼šé€šè¿‡åˆ†å¸ƒå¼è¿è¡Œæ—¶ç»Ÿä¸€ç®¡ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸æœåŠ¡å‘ç°
- æ–‡æ¡£ä¸ç¤ºä¾‹ï¼šdocs/pages æä¾›è®¾è®¡æ–‡æ¡£ã€ç‰¹æ€§çŸ©é˜µä¸åç«¯ä½¿ç”¨è¯´æ˜ï¼›examples æä¾›éƒ¨ç½²ä¸åŸºå‡†æµ‹è¯•è„šæœ¬

```mermaid
graph TB
FE["å‰ç«¯(Frontend)"] --> RT["åˆ†å¸ƒå¼è¿è¡Œæ—¶(DistributedRuntime)"]
RT --> SG["SGLang å¼•æ“"]
RT --> TRT["TensorRT-LLM å¼•æ“"]
RT --> VL["vLLM å¼•æ“"]
RT --> DISC["æœåŠ¡å‘ç°/äº‹ä»¶å¹³é¢"]
DISC --> SG
DISC --> TRT
DISC --> VL
```

**å›¾è¡¨æ¥æº**
- [components/src/dynamo/sglang/main.py](file://components/src/dynamo/sglang/main.py#L1-L888)
- [components/src/dynamo/trtllm/main.py](file://components/src/dynamo/trtllm/main.py#L1-L51)
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L1-L1373)

**ç« èŠ‚æ¥æº**
- [components/src/dynamo/sglang/main.py](file://components/src/dynamo/sglang/main.py#L1-L888)
- [components/src/dynamo/trtllm/main.py](file://components/src/dynamo/trtllm/main.py#L1-L51)
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L1-L1373)

## æ ¸å¿ƒç»„ä»¶
- SGLang åç«¯ï¼šé€šè¿‡ SGLang Engine é›†æˆï¼Œæ”¯æŒé«˜ååã€å¿«é€ŸåŸè¯­ä¸å¤šæ¨¡æ€ï¼›åœ¨ KV è·¯ç”±ä¸è¯·æ±‚è¿ç§»æ–¹é¢å…·å¤‡è‰¯å¥½èƒ½åŠ›ï¼Œä½† KVBM æ”¯æŒå°šåœ¨è§„åˆ’é˜¶æ®µã€‚
- TensorRT-LLM åç«¯ï¼šå¼ºè°ƒæ¨ç†æ€§èƒ½ä¸ä¼˜åŒ–ï¼Œå…·å¤‡å®Œæ•´çš„ KVBM é›†æˆä¸ KV ç¼“å­˜è½¬ç§»èƒ½åŠ›ï¼Œæ”¯æŒå¤§è§„æ¨¡ P/D ä¸ WideEP åœºæ™¯ã€‚
- vLLM åç«¯ï¼šç‰¹æ€§è¦†ç›–æœ€å¹¿ï¼Œæ”¯æŒ KVBMã€LMCacheã€å¤šæ¨¡æ€è§†é¢‘/éŸ³é¢‘ã€LoRAã€å·¥å…·è°ƒç”¨ã€æ¨æµ‹å¼è§£ç ç­‰ï¼Œé€‚é…æ€§å¼ºã€‚

**ç« èŠ‚æ¥æº**
- [docs/pages/backends/sglang/README.md](file://docs/pages/backends/sglang/README.md#L1-L264)
- [docs/pages/backends/trtllm/README.md](file://docs/pages/backends/trtllm/README.md#L1-L397)
- [docs/pages/backends/vllm/README.md](file://docs/pages/backends/vllm/README.md#L1-L201)

## æ¶æ„æ€»è§ˆ
Dynamo çš„è§£è€¦åˆæœåŠ¡å°†é¢„å¡«å……ï¼ˆPrefillï¼‰ä¸è§£ç ï¼ˆDecodeï¼‰åˆ†ç¦»ï¼Œé€šè¿‡ KV ç¼“å­˜é«˜æ•ˆè½¬ç§»å®ç°è·¨èŠ‚ç‚¹/è¿›ç¨‹çš„å¹¶è¡ŒåŠ é€Ÿã€‚ä¸‰åç«¯å‡æ”¯æŒè¯¥æ¨¡å¼ï¼Œä½†åœ¨ä¼ è¾“å…ƒæ•°æ®ä¸è·¯ç”±ç­–ç•¥ä¸Šå­˜åœ¨å·®å¼‚ã€‚

```mermaid
sequenceDiagram
participant å®¢æˆ·ç«¯
participant å‰ç«¯
participant è·¯ç”±å™¨ as é¢„å¡«å……è·¯ç”±å™¨
participant é¢„å¡«å…… as é¢„å¡«å……å·¥ä½œèŠ‚ç‚¹
participant è§£ç  as è§£ç å·¥ä½œèŠ‚ç‚¹
å®¢æˆ·ç«¯->>å‰ç«¯ : è¯·æ±‚
å‰ç«¯->>è·¯ç”±å™¨ : é¢„å¤„ç†åçš„è¯·æ±‚
è·¯ç”±å™¨->>è·¯ç”±å™¨ : é€‰æ‹©é¢„å¡«å……å·¥ä½œèŠ‚ç‚¹
è·¯ç”±å™¨->>é¢„å¡«å…… : å‘é€é¢„å¡«å……è¯·æ±‚
é¢„å¡«å……->>é¢„å¡«å…… : è®¡ç®—KVç¼“å­˜
é¢„å¡«å……-->>è·¯ç”±å™¨ : åˆ†ç¦»å‚æ•°(åç«¯ç‰¹å®š)
è·¯ç”±å™¨->>è·¯ç”±å™¨ : é€‰æ‹©è§£ç å·¥ä½œèŠ‚ç‚¹
è·¯ç”±å™¨->>è§£ç  : å‘é€è§£ç è¯·æ±‚+è½¬ç§»å…ƒæ•°æ®
è§£ç <<->>é¢„å¡«å…… : KVç¼“å­˜è½¬ç§»(NIXL)
è§£ç ->>è§£ç  : ç”Ÿæˆtoken
è§£ç -->>å‰ç«¯ : æµå¼è¿”å›
å‰ç«¯-->>å®¢æˆ·ç«¯ : å“åº”
```

**å›¾è¡¨æ¥æº**
- [docs/pages/design-docs/disagg-serving.md](file://docs/pages/design-docs/disagg-serving.md#L25-L64)

**ç« èŠ‚æ¥æº**
- [docs/pages/design-docs/disagg-serving.md](file://docs/pages/design-docs/disagg-serving.md#L1-L75)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### SGLang åç«¯
- æ€§èƒ½ç‰¹ç‚¹ï¼šé«˜ååã€å¿«é€ŸåŸè¯­ï¼Œé€‚åˆå¯¹å»¶è¿Ÿä¸ååæ•æ„Ÿçš„åœºæ™¯ï¼›åœ¨é¢„å¡«å……é˜¶æ®µæ”¯æŒçƒ­èº«ä»¥é¿å…é¦– Token æ—¶é—´ï¼ˆTTFTï¼‰å°–åˆºã€‚
- åŠŸèƒ½æ”¯æŒï¼šè§£è€¦åˆæœåŠ¡ã€KV è·¯ç”±ã€SLA è§„åˆ’å™¨ã€å¤šæ¨¡æ€ï¼ˆå›¾åƒ/E/PD æ¨¡å¼ï¼‰ã€å·¥å…·è°ƒç”¨ï¼›è¯·æ±‚è¿ç§»æ”¯æŒè‰¯å¥½ï¼Œä½†å–æ¶ˆæ”¯æŒåœ¨è§£è€¦åˆé¢„å¡«å……é˜¶æ®µæœ‰é™ã€‚
- éƒ¨ç½²å¤æ‚åº¦ï¼šç›¸å¯¹è¾ƒä½ï¼Œæ”¯æŒå®¹å™¨åŒ–ä¸ Kubernetes éƒ¨ç½²ï¼›å¯ç›´æ¥å¤ç”¨ SGLang å‚æ•°è§£æï¼Œä¾¿äºæ‰©å±•ã€‚
- é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é«˜ååä¸ç¨³å®šæ€§çš„åœ¨çº¿æœåŠ¡ã€å¤šæ¨¡æ€å›¾åƒå¤„ç†ã€å·¥å…·è°ƒç”¨å¯†é›†å‹åº”ç”¨ã€‚

```mermaid
flowchart TD
Start(["å¯åŠ¨ SGLang å·¥ä½œèŠ‚ç‚¹"]) --> CheckRank["æ£€æŸ¥èŠ‚ç‚¹è§’è‰²(ä¸»/éä¸»)"]
CheckRank --> |éä¸»| Metrics["ä»…å‘å¸ƒæŒ‡æ ‡ä¸äº‹ä»¶"] --> End
CheckRank --> |ä¸»| InitEngine["åˆå§‹åŒ– SGLang å¼•æ“"]
InitEngine --> Warmup["é¢„å¡«å……çƒ­èº«(å¯é€‰)"]
Warmup --> Register["æ³¨å†Œæ¨¡å‹ä¸ç«¯ç‚¹"]
Register --> Serve["æä¾›æœåŠ¡å¹¶ç­‰å¾…å…³é—­ä¿¡å·"]
Serve --> Cleanup["æ¸…ç†èµ„æºä¸ deferred å¤„ç†"]
Cleanup --> End(["ç»“æŸ"])
```

**å›¾è¡¨æ¥æº**
- [components/src/dynamo/sglang/main.py](file://components/src/dynamo/sglang/main.py#L235-L407)

**ç« èŠ‚æ¥æº**
- [components/src/dynamo/sglang/main.py](file://components/src/dynamo/sglang/main.py#L1-L888)
- [docs/pages/backends/sglang/README.md](file://docs/pages/backends/sglang/README.md#L1-L264)

### TensorRT-LLM åç«¯
- æ€§èƒ½ç‰¹ç‚¹ï¼šæè‡´æ¨ç†æ€§èƒ½ä¸ä¼˜åŒ–ï¼Œæ”¯æŒå¤§è§„æ¨¡ P/D ä¸ WideEPï¼›å…·å¤‡å®Œæ•´çš„ KVBM é›†æˆä¸ KV ç¼“å­˜è½¬ç§»èƒ½åŠ›ã€‚
- åŠŸèƒ½æ”¯æŒï¼šè§£è€¦åˆæœåŠ¡ã€KV è·¯ç”±ã€SLA è§„åˆ’å™¨ã€KVBMã€å¤šæ¨¡æ€ï¼ˆå›¾åƒ/è§†é¢‘åµŒå…¥ï¼‰ã€å·¥å…·è°ƒç”¨ï¼›è¯·æ±‚è¿ç§»ä¸å–æ¶ˆæ”¯æŒè‰¯å¥½ã€‚
- éƒ¨ç½²å¤æ‚åº¦ï¼šè¾ƒé«˜ï¼Œéœ€å…³æ³¨ç¼“å­˜è½¬ç§»é…ç½®ä¸å·²çŸ¥é—®é¢˜ï¼ˆå¦‚ KV ç¼“å­˜è€—å°½å¯¼è‡´æ­»é”ï¼‰ï¼Œå»ºè®®åœ¨ç”Ÿäº§å‰å®Œæˆæ€§èƒ½ä¸ç¨³å®šæ€§éªŒè¯ã€‚
- é€‚ç”¨åœºæ™¯ï¼šå¯¹ååä¸å»¶è¿Ÿæœ‰æé«˜è¦æ±‚çš„å¤§è§„æ¨¡æ¨ç†é›†ç¾¤ã€éœ€è¦ KVBM é™ä½ TTFT çš„é•¿ä¸Šä¸‹æ–‡å¯¹è¯åœºæ™¯ã€‚

```mermaid
flowchart TD
Start(["å¯åŠ¨ TRTLLM å·¥ä½œèŠ‚ç‚¹"]) --> CheckRank["æ£€æŸ¥æ•°æ®å¹¶è¡Œç­‰çº§"]
CheckRank --> |éä¸»| Wait["æ— é™ç­‰å¾…(ä¿¡å·è§¦å‘é€€å‡º)"] --> End
CheckRank --> |ä¸»| InitEngine["åˆå§‹åŒ– TRTLLM å¼•æ“"]
InitEngine --> SetupKV["è®¾ç½® KV äº‹ä»¶å‘å¸ƒ(å¯é€‰)"]
SetupKV --> Register["æ³¨å†Œæ¨¡å‹ä¸ç«¯ç‚¹"]
Register --> Serve["æä¾›æœåŠ¡å¹¶ç­‰å¾…å…³é—­ä¿¡å·"]
Serve --> Cleanup["æ¸…ç†èµ„æºä¸ deferred å¤„ç†"]
Cleanup --> End(["ç»“æŸ"])
```

**å›¾è¡¨æ¥æº**
- [components/src/dynamo/trtllm/main.py](file://components/src/dynamo/trtllm/main.py#L29-L51)
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L73-L84)

**ç« èŠ‚æ¥æº**
- [components/src/dynamo/trtllm/main.py](file://components/src/dynamo/trtllm/main.py#L1-L51)
- [docs/pages/backends/trtllm/README.md](file://docs/pages/backends/trtllm/README.md#L1-L397)

### vLLM åç«¯
- æ€§èƒ½ç‰¹ç‚¹ï¼šç‰¹æ€§è¦†ç›–æœ€å¹¿ï¼Œæ”¯æŒ KVBMã€LMCacheã€å¤šæ¨¡æ€è§†é¢‘/éŸ³é¢‘ã€LoRAã€å·¥å…·è°ƒç”¨ã€æ¨æµ‹å¼è§£ç ï¼›åœ¨å¤šæ¨¡æ€ä¸ç”Ÿæ€é›†æˆæ–¹é¢ä¼˜åŠ¿æ˜æ˜¾ã€‚
- åŠŸèƒ½æ”¯æŒï¼šè§£è€¦åˆæœåŠ¡ã€KV è·¯ç”±ã€SLA è§„åˆ’å™¨ã€KVBMã€å¤šæ¨¡æ€ï¼ˆå›¾åƒ/è§†é¢‘/éŸ³é¢‘ï¼‰ã€å·¥å…·è°ƒç”¨ã€æ¨æµ‹å¼è§£ç ï¼›è¯·æ±‚è¿ç§»ä¸å–æ¶ˆæ”¯æŒè‰¯å¥½ã€‚
- éƒ¨ç½²å¤æ‚åº¦ï¼šä¸­ç­‰ï¼Œæ”¯æŒå®¹å™¨åŒ–ä¸ Kubernetes éƒ¨ç½²ï¼›éœ€æ³¨æ„å“ˆå¸Œä¸€è‡´æ€§ä¸å‰ç¼€ç¼“å­˜ç®—æ³•é…ç½®ã€‚
- é€‚ç”¨åœºæ™¯ï¼šå¤šæ¨¡æ€ä¸å·¥å…·è°ƒç”¨å¯†é›†å‹åº”ç”¨ã€éœ€è¦çµæ´»ç”Ÿæ€é›†æˆä¸å¯è§‚æµ‹æ€§çš„ä¼ä¸šçº§éƒ¨ç½²ã€‚

```mermaid
flowchart TD
Start(["å¯åŠ¨ vLLM å·¥ä½œèŠ‚ç‚¹"]) --> CheckRank["æ£€æŸ¥æ•°æ®å¹¶è¡Œç­‰çº§"]
CheckRank --> |éä¸»| Wait["æ— é™ç­‰å¾…(ä¿¡å·è§¦å‘é€€å‡º)"] --> End
CheckRank --> |ä¸»| SetupMetrics["è®¾ç½®æŒ‡æ ‡æ”¶é›†(å¤šè¿›ç¨‹å…¼å®¹)"]
SetupMetrics --> SetupKV["è®¾ç½® KV äº‹ä»¶å‘å¸ƒ(å¯é€‰)"]
SetupKV --> Register["æ³¨å†Œæ¨¡å‹ä¸ç«¯ç‚¹"]
Register --> Serve["æä¾›æœåŠ¡å¹¶ç­‰å¾…å…³é—­ä¿¡å·"]
Serve --> Cleanup["æ¸…ç†èµ„æºä¸ deferred å¤„ç†"]
Cleanup --> End(["ç»“æŸ"])
```

**å›¾è¡¨æ¥æº**
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L73-L84)
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L193-L281)

**ç« èŠ‚æ¥æº**
- [components/src/dynamo/vllm/main.py](file://components/src/dynamo/vllm/main.py#L1-L1373)
- [docs/pages/backends/vllm/README.md](file://docs/pages/backends/vllm/README.md#L1-L201)

## ä¾èµ–å…³ç³»åˆ†æ
- åç«¯å·¥å‚ä¸å¤šèŠ‚ç‚¹éƒ¨ç½²ï¼šOperator å±‚é€šè¿‡åç«¯å·¥å‚é€‰æ‹©å…·ä½“åç«¯å®ç°ï¼Œå¹¶æ ¹æ®éƒ¨ç½²ç±»å‹ï¼ˆGrove/LWSï¼‰ç”Ÿæˆå¤šèŠ‚ç‚¹ Pod é›†åˆã€‚
- ç»„ä»¶å‘ç°ä¸è·¯ç”±ï¼šåç«¯é€šè¿‡åˆ†å¸ƒå¼è¿è¡Œæ—¶æ³¨å†Œç«¯ç‚¹ä¸è¿è¡Œæ—¶é…ç½®ï¼Œå‰ç«¯ä¸è·¯ç”±å™¨åŸºäºå‘ç°æœåŠ¡è¿›è¡ŒåŠ¨æ€è°ƒåº¦ã€‚

```mermaid
graph TB
OP["Operator åç«¯å·¥å‚"] --> SG["SGLang åç«¯"]
OP --> TRT["TensorRT-LLM åç«¯"]
OP --> VL["vLLM åç«¯"]
SG --> RT["åˆ†å¸ƒå¼è¿è¡Œæ—¶"]
TRT --> RT
VL --> RT
RT --> DISC["æœåŠ¡å‘ç°/äº‹ä»¶å¹³é¢"]
```

**å›¾è¡¨æ¥æº**
- [deploy/operator/internal/dynamo/graph.go](file://deploy/operator/internal/dynamo/graph.go#L819-L835)

**ç« èŠ‚æ¥æº**
- [deploy/operator/internal/dynamo/graph.go](file://deploy/operator/internal/dynamo/graph.go#L808-L1511)

## æ€§èƒ½è€ƒé‡
- è§£è€¦åˆæœåŠ¡æ”¶ç›Šï¼šé€šè¿‡å°†é¢„å¡«å……ä¸è§£ç åˆ†ç¦»ï¼Œå¯åœ¨ä¸åŒ TP è®¾ç½®ä¸‹å¹³è¡¡å†…å­˜ä¸è®¡ç®—å‹åŠ›ï¼Œæå‡æ•´ä½“ååä¸èµ„æºåˆ©ç”¨ç‡ã€‚
- KV ç¼“å­˜è½¬ç§»ï¼šNIXL å®ç° GPU åˆ° GPU çš„éé˜»å¡è½¬ç§»ï¼Œå‡å°‘è·¨èŠ‚ç‚¹/è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€‚
- åç«¯å·®å¼‚ï¼šTensorRT-LLM åœ¨æè‡´æ€§èƒ½ä¸å¤§è§„æ¨¡åœºæ™¯è¡¨ç°çªå‡ºï¼›vLLM åœ¨ç‰¹æ€§è¦†ç›–ä¸ç”Ÿæ€é›†æˆæ–¹é¢æ›´ä¼˜ï¼›SGLang åœ¨é«˜ååä¸å¿«é€ŸåŸè¯­æ–¹é¢å…·å¤‡ä¼˜åŠ¿ã€‚

**ç« èŠ‚æ¥æº**
- [docs/pages/design-docs/disagg-serving.md](file://docs/pages/design-docs/disagg-serving.md#L17-L64)

## æ•…éšœå¤„ç†ä¸è¿ç§»
- è¯·æ±‚è¿ç§»ï¼šåœ¨å·¥ä½œèŠ‚ç‚¹å¤±è´¥æ—¶ï¼Œè¿ç§»ç³»ç»Ÿä¿ç•™éƒ¨åˆ†ç”ŸæˆçŠ¶æ€å¹¶åœ¨æ–°èŠ‚ç‚¹ç»§ç»­ï¼Œä¿è¯æ— ä¸­æ–­ä½“éªŒã€‚
- è¯·æ±‚å–æ¶ˆï¼šé€šè¿‡ AsyncEngineContext æä¾›çš„åœæ­¢/æ€æ­»æ¥å£å®ç°ä¼˜é›…æˆ–å¼ºåˆ¶ç»ˆæ­¢ï¼Œæ”¯æŒçˆ¶å­è¯·æ±‚é“¾è·¯çš„å–æ¶ˆä¼ æ’­ã€‚

```mermaid
sequenceDiagram
participant å‰ç«¯
participant è¿ç§»å™¨
participant æ–°å·¥ä½œèŠ‚ç‚¹
å‰ç«¯->>è¿ç§»å™¨ : æ£€æµ‹åˆ°å¤±è´¥
è¿ç§»å™¨->>è¿ç§»å™¨ : ä¿å­˜éƒ¨åˆ†ç”ŸæˆçŠ¶æ€
è¿ç§»å™¨->>æ–°å·¥ä½œèŠ‚ç‚¹ : åˆ›å»ºæ–°æµå¹¶æ³¨å…¥ç´¯ç§¯çŠ¶æ€
æ–°å·¥ä½œèŠ‚ç‚¹-->>å‰ç«¯ : ç»§ç»­ç”Ÿæˆå¹¶è¿”å›å“åº”
```

**å›¾è¡¨æ¥æº**
- [docs/pages/fault-tolerance/request-migration.md](file://docs/pages/fault-tolerance/request-migration.md#L1-L137)

**ç« èŠ‚æ¥æº**
- [docs/pages/fault-tolerance/request-migration.md](file://docs/pages/fault-tolerance/request-migration.md#L1-L137)
- [docs/pages/fault-tolerance/request-cancellation.md](file://docs/pages/fault-tolerance/request-cancellation.md#L1-L92)

## è¿ç§»æŒ‡å—ä¸æœ€ä½³å®è·µ
- ä» SGLang è¿ç§»åˆ° vLLM
  - ä¼˜åŠ¿ï¼švLLM åœ¨å¤šæ¨¡æ€ã€å·¥å…·è°ƒç”¨ã€LoRAã€KVBM ç­‰ç‰¹æ€§ä¸Šè¦†ç›–æ›´å¹¿ï¼Œç”Ÿæ€ä¸å¯è§‚æµ‹æ€§æ›´å¼ºã€‚
  - æ­¥éª¤ï¼šç¡®è®¤æ¨¡å‹ä¸å‚æ•°æ˜ å°„ã€å¯ç”¨å¤šæ¨¡æ€æ ‡å¿—ã€é…ç½® KVBM ä¸å‰ç¼€ç¼“å­˜ã€éªŒè¯å·¥å…·è°ƒç”¨ä¸æ¨ç†æŒ‡æ ‡ã€‚
  - å‚è€ƒï¼šåç«¯ README ä¸­çš„é…ç½®ä¸ç¤ºä¾‹è„šæœ¬ã€‚

- ä» SGLang è¿ç§»åˆ° TensorRT-LLM
  - ä¼˜åŠ¿ï¼šæè‡´æ€§èƒ½ä¸å¤§è§„æ¨¡ P/Dã€WideEP æ”¯æŒï¼Œé€‚åˆé«˜åååœºæ™¯ã€‚
  - æ­¥éª¤ï¼šå…³æ³¨ KV ç¼“å­˜è½¬ç§»é…ç½®ã€é¿å…å·²çŸ¥é—®é¢˜ï¼ˆå¦‚ KV ç¼“å­˜è€—å°½å¯¼è‡´æ­»é”ï¼‰ã€éªŒè¯å¤§è§„æ¨¡éƒ¨ç½²ç¨³å®šæ€§ã€‚
  - å‚è€ƒï¼šåç«¯ README ä¸­çš„ KV ç¼“å­˜è½¬ç§»ä¸å·²çŸ¥é—®é¢˜ç« èŠ‚ã€‚

- ä» vLLM è¿ç§»åˆ° TensorRT-LLM
  - ä¼˜åŠ¿ï¼šè¿½æ±‚æè‡´ååä¸ç¡¬ä»¶åˆ©ç”¨ç‡ï¼Œç»“åˆ KVBM é™ä½ TTFTã€‚
  - æ­¥éª¤ï¼šè°ƒæ•´æ¨¡å‹åŠ è½½æ ¼å¼ã€å¯ç”¨é«˜æ€§èƒ½è·¯å¾„ã€æ ¡éªŒå¤§è§„æ¨¡éƒ¨ç½²ä¸ç¼“å­˜ç­–ç•¥ã€‚
  - å‚è€ƒï¼šåç«¯ README ä¸­çš„æ€§èƒ½ä¸ KVBM é›†æˆç« èŠ‚ã€‚

- ä» TensorRT-LLM è¿ç§»åˆ° vLLM
  - ä¼˜åŠ¿ï¼šç‰¹æ€§ä¸°å¯Œã€ç”Ÿæ€å®Œå–„ã€æ˜“äºæ‰©å±•ä¸è§‚æµ‹ã€‚
  - æ­¥éª¤ï¼šè¿ç§»å¤šæ¨¡æ€ä¸å·¥å…·è°ƒç”¨é€»è¾‘ã€å¯ç”¨ KVBM ä¸å‰ç¼€ç¼“å­˜ã€éªŒè¯æŒ‡æ ‡ä¸ç¨³å®šæ€§ã€‚
  - å‚è€ƒï¼šåç«¯ README ä¸­çš„é…ç½®ä¸ç¤ºä¾‹è„šæœ¬ã€‚

- é€šç”¨æœ€ä½³å®è·µ
  - æ˜ç¡®éœ€æ±‚ä¼˜å…ˆçº§ï¼šæ€§èƒ½ã€åŠŸèƒ½ã€é¢„ç®—ã€å›¢é˜ŸæŠ€èƒ½ä¸è¿ç»´å¤æ‚åº¦ã€‚
  - éªŒè¯ KV è·¯ç”±ä¸€è‡´æ€§ä¸å‰ç¼€ç¼“å­˜ç®—æ³•ï¼Œç¡®ä¿äº‹ä»¶ ID ä¸€è‡´æ€§ã€‚
  - åœ¨ç”Ÿäº§å‰è¿›è¡Œå‹åŠ›ä¸ç¨³å®šæ€§æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯å¤§è§„æ¨¡ä¸é•¿ä¸Šä¸‹æ–‡åœºæ™¯ã€‚

**ç« èŠ‚æ¥æº**
- [docs/pages/backends/sglang/README.md](file://docs/pages/backends/sglang/README.md#L1-L264)
- [docs/pages/backends/trtllm/README.md](file://docs/pages/backends/trtllm/README.md#L1-L397)
- [docs/pages/backends/vllm/README.md](file://docs/pages/backends/vllm/README.md#L1-L201)

## ç»“è®º
- è‹¥è¿½æ±‚æè‡´æ€§èƒ½ä¸å¤§è§„æ¨¡åœºæ™¯ï¼šé€‰æ‹© TensorRT-LLMã€‚
- è‹¥éœ€è¦å¹¿æ³›ç‰¹æ€§ä¸ç”Ÿæ€é›†æˆï¼šé€‰æ‹© vLLMã€‚
- è‹¥å¼ºè°ƒé«˜ååä¸å¿«é€ŸåŸè¯­ï¼šé€‰æ‹© SGLangã€‚
- æœ€ç»ˆé€‰å‹åº”ç»¼åˆè€ƒè™‘æ€§èƒ½ç›®æ ‡ã€åŠŸèƒ½éœ€æ±‚ã€é¢„ç®—çº¦æŸä¸å›¢é˜ŸæŠ€èƒ½ï¼Œå¹¶é€šè¿‡åŸºå‡†æµ‹è¯•ä¸ç¨³å®šæ€§éªŒè¯ç¡®å®šæœ€ç»ˆæ–¹æ¡ˆã€‚

## é™„å½•ï¼šåŠŸèƒ½çŸ©é˜µä¸å†³ç­–æ ‘

### åŠŸèƒ½çŸ©é˜µï¼ˆåŸºäºå®˜æ–¹ç‰¹æ€§çŸ©é˜µï¼‰
- Legendï¼šâœ… æ”¯æŒï¼ŒğŸš§ è¿›è¡Œä¸­/å®éªŒ/æœ‰é™
- è¯¦ç»†çŸ©é˜µå‚è§å‚è€ƒé¡µ

**ç« èŠ‚æ¥æº**
- [docs/pages/reference/feature-matrix.md](file://docs/pages/reference/feature-matrix.md#L1-L135)

### åç«¯é€‰æ‹©å†³ç­–æ ‘
```mermaid
flowchart TD
A["å¼€å§‹é€‰å‹"] --> B{"æ€§èƒ½ä¼˜å…ˆï¼Ÿ"}
B --> |æ˜¯| C{"å¤§è§„æ¨¡/é«˜ååï¼Ÿ"}
C --> |æ˜¯| D["TensorRT-LLM"]
C --> |å¦| E["SGLang"]
B --> |å¦| F{"åŠŸèƒ½ä¸°å¯Œåº¦ä¼˜å…ˆï¼Ÿ"}
F --> |æ˜¯| G["vLLM"]
F --> |å¦| H{"å›¢é˜ŸæŠ€èƒ½ä¸ç”Ÿæ€ï¼Ÿ"}
H --> |vLLM ç”Ÿæ€æ›´å¥½| G
H --> |SGLang æ›´æ˜“ä¸Šæ‰‹| E
H --> |TRTLLM æ€§èƒ½ä¼˜å…ˆ| D
```

[æ­¤å›¾ä¸ºæ¦‚å¿µæµç¨‹å›¾ï¼Œä¸ç›´æ¥æ˜ å°„å…·ä½“æºæ–‡ä»¶]

### å†³ç­–è¯„ä¼°æ ‡å‡†
- æ€§èƒ½ï¼šååã€å»¶è¿Ÿã€TTFTã€èµ„æºåˆ©ç”¨ç‡
- åŠŸèƒ½ï¼šå¤šæ¨¡æ€ã€å·¥å…·è°ƒç”¨ã€LoRAã€KVBMã€å‰ç¼€ç¼“å­˜ã€æ¨æµ‹å¼è§£ç 
- éƒ¨ç½²å¤æ‚åº¦ï¼šå®¹å™¨åŒ–ã€Kubernetesã€ç½‘ç»œä¸å­˜å‚¨é…ç½®
- è¿ç»´ä¸å¯è§‚æµ‹æ€§ï¼šæŒ‡æ ‡ã€æ—¥å¿—ã€å‘Šè­¦ã€è¿ç§»ä¸å–æ¶ˆèƒ½åŠ›
- é¢„ç®—ä¸ç¡¬ä»¶ï¼šGPU æ¶æ„ã€CUDA ç‰ˆæœ¬ã€é©±åŠ¨å…¼å®¹æ€§

**ç« èŠ‚æ¥æº**
- [docs/pages/reference/support-matrix.md](file://docs/pages/reference/support-matrix.md#L1-L178)